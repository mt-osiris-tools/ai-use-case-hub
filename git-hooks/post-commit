#!/bin/bash
# Git Post-Commit Hook for AI Use Cases Sync
# Automatically syncs AI use case documentation to central location after each commit
#
# This hook is triggered after a successful git commit

# Configuration
SYNC_SCRIPT="${AI_USECASES_SYNC_SCRIPT:-$HOME/Documents/ai-use-cases/sync-ai-use-cases.sh}"

# Only sync if the sync script exists
if [ ! -f "$SYNC_SCRIPT" ]; then
    exit 0
fi

# Get the list of changed files in the last commit
CHANGED_FILES=$(git diff-tree --no-commit-id --name-only -r HEAD)

# Check if any AI use case files were modified
if echo "$CHANGED_FILES" | grep -q "ai-use-cases/.*\.md"; then
    echo ""
    echo "ðŸ¤– AI Use Cases detected in commit, syncing to central location..."

    # Run sync script
    if "$SYNC_SCRIPT" "$(git rev-parse --show-toplevel)"; then
        echo "âœ“ AI Use Cases synced successfully"
    else
        echo "âš  Warning: AI Use Cases sync failed (non-fatal)"
    fi

    echo ""
fi

exit 0
